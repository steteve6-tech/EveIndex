# æ•°æ®åº“å»ºç«‹æ–‡ä»¶ç”ŸæˆæŠ¥å‘Š

## ğŸ¯ ä»»åŠ¡æ¦‚è¿°
æ ¹æ®å½“å‰é¡¹ç›®ä¸­çš„å®ä½“ç±»å’Œç°å­˜çš„æ•°æ®è¡¨ï¼Œç”Ÿæˆäº†å®Œæ•´çš„æ•°æ®åº“å»ºç«‹æ–‡ä»¶ï¼Œç”¨äºè§£å†³Spring Bootåº”ç”¨å¯åŠ¨æ—¶çš„æ•°æ®åº“æ¨¡å¼éªŒè¯é—®é¢˜ã€‚

## ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€åˆ†æ

### ç°å­˜æ•°æ®è¡¨ï¼ˆ13ä¸ªï¼‰
1. `daily_country_risk_stats` - æ¯æ—¥å›½å®¶é£é™©ç»Ÿè®¡è¡¨
2. `t_country` - å›½å®¶åŸºç¡€ä¿¡æ¯è¡¨
3. `t_crawler_checkpoint` - çˆ¬è™«æ–­ç‚¹ç»­ä¼ è¡¨
4. `t_crawler_data` - çˆ¬è™«æ•°æ®è¡¨
5. `t_crawler_state` - çˆ¬è™«çŠ¶æ€è¡¨
6. `t_customs_case` - æµ·å…³è¿‡å¾€åˆ¤ä¾‹è¡¨
7. `t_device_510k` - è®¾å¤‡510Kè®°å½•è¡¨
8. `t_device_event` - è®¾å¤‡äº‹ä»¶æŠ¥å‘Šè¡¨
9. `t_device_recall` - è®¾å¤‡å¬å›è®°å½•è¡¨
10. `t_device_registration` - è®¾å¤‡æ³¨å†Œè®°å½•è¡¨
11. `t_devicematch_keywords` - è®¾å¤‡åŒ¹é…å…³é”®è¯è¡¨
12. `t_guidance_document` - åŒ»ç–—æ–‡æ¡£è¡¨
13. `t_keyword` - å…³é”®è¯è¡¨

### å¯¹åº”å®ä½“ç±»ï¼ˆ13ä¸ªï¼‰
1. `CertNewsDailyCountryRiskStats.java`
2. `Country.java`
3. `CrawlerCheckpoint.java`
4. `CertNewsData.java`
5. `CrawlerState.java`
6. `CustomsCase.java`
7. `Device510K.java`
8. `DeviceEventReport.java`
9. `DeviceRecallRecord.java`
10. `DeviceRegistrationRecord.java`
11. `DeviceMatchKeywords.java`
12. `GuidanceDocument.java`
13. `Keyword.java`

## ğŸ“„ ç”Ÿæˆçš„æ–‡ä»¶

### 1. create_database_schema.sql
**å®Œæ•´ç‰ˆæ•°æ®åº“å»ºç«‹è„šæœ¬**
- âœ… åŒ…å«æ‰€æœ‰13ä¸ªè¡¨çš„å®Œæ•´ç»“æ„å®šä¹‰
- âœ… åŒ…å«è¯¦ç»†çš„å­—æ®µæ³¨é‡Šå’Œç´¢å¼•
- âœ… åŒ…å«åŸºç¡€æ•°æ®æ’å…¥
- âœ… åŒ…å«è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹å’Œè§¦å‘å™¨
- âœ… åŒ…å«å®Œæ•´çš„çº¦æŸå’Œå…³ç³»å®šä¹‰

**ç‰¹ç‚¹ï¼š**
- ç”Ÿäº§ç¯å¢ƒé€‚ç”¨
- åŒ…å«å®Œæ•´çš„æ•°æ®åº“åŠŸèƒ½
- æ”¯æŒé«˜çº§ç‰¹æ€§ï¼ˆè§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ï¼‰
- è¯¦ç»†çš„æ³¨é‡Šå’Œæ–‡æ¡£

### 2. rebuild_database.sql
**å¿«é€Ÿé‡å»ºè„šæœ¬**
- âœ… ç®€åŒ–çš„è¡¨ç»“æ„å®šä¹‰
- âœ… æ ¸å¿ƒå­—æ®µå’Œç´¢å¼•
- âœ… åŸºç¡€æ•°æ®æ’å…¥
- âœ… å¿«é€Ÿæ‰§è¡Œ

**ç‰¹ç‚¹ï¼š**
- å¼€å‘ç¯å¢ƒé€‚ç”¨
- å¿«é€Ÿé‡å»ºæ•°æ®åº“
- ç®€åŒ–çš„ç»“æ„ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
- é€‚åˆè§£å†³å¯åŠ¨é—®é¢˜

## ğŸ—‚ï¸ è¡¨ç»“æ„è¯¦æƒ…

### æ ¸å¿ƒä¸šåŠ¡è¡¨
| è¡¨å | å®ä½“ç±» | ä¸»è¦åŠŸèƒ½ | å…³é”®å­—æ®µ |
|------|--------|----------|----------|
| `t_device_510k` | Device510K | FDA 510Kè®¾å¤‡è®°å½• | k_number, device_class, risk_level |
| `t_device_event` | DeviceEventReport | è®¾å¤‡äº‹ä»¶æŠ¥å‘Š | report_number, risk_level, device_class |
| `t_device_recall` | DeviceRecallRecord | è®¾å¤‡å¬å›è®°å½• | cfres_id, recall_status, risk_level |
| `t_device_registration` | DeviceRegistrationRecord | è®¾å¤‡æ³¨å†Œè®°å½• | registration_number, data_source |
| `t_guidance_document` | GuidanceDocument | åŒ»ç–—æŒ‡å¯¼æ–‡æ¡£ | title, document_type, risk_level |
| `t_customs_case` | CustomsCase | æµ·å…³åˆ¤ä¾‹ | case_number, violation_type, risk_level |

### ç³»ç»Ÿç®¡ç†è¡¨
| è¡¨å | å®ä½“ç±» | ä¸»è¦åŠŸèƒ½ | å…³é”®å­—æ®µ |
|------|--------|----------|----------|
| `t_country` | Country | å›½å®¶åŸºç¡€ä¿¡æ¯ | country_code, country_name |
| `t_keyword` | Keyword | å…³é”®è¯ç®¡ç† | keyword, enabled |
| `t_devicematch_keywords` | DeviceMatchKeywords | è®¾å¤‡åŒ¹é…å…³é”®è¯ | keyword, keyword_type |
| `t_crawler_data` | CertNewsData | çˆ¬è™«æ•°æ®å­˜å‚¨ | id, source_name, risk_level |
| `t_crawler_state` | CrawlerState | çˆ¬è™«çŠ¶æ€ç®¡ç† | crawler_name, status |
| `t_crawler_checkpoint` | CrawlerCheckpoint | çˆ¬è™«æ–­ç‚¹ç»­ä¼  | crawler_type, status |
| `daily_country_risk_stats` | CertNewsDailyCountryRiskStats | é£é™©ç»Ÿè®¡ | stat_date, country |

## ğŸ”§ å…³é”®ç‰¹æ€§

### 1. é£é™©ç­‰çº§ç®¡ç†
- ç»Ÿä¸€çš„`risk_level`æšä¸¾ï¼š`HIGH`, `MEDIUM`, `LOW`, `NONE`
- æ‰€æœ‰ä¸šåŠ¡è¡¨éƒ½åŒ…å«é£é™©ç­‰çº§å­—æ®µ
- æ”¯æŒé£é™©ç»Ÿè®¡å’Œåˆ†æ

### 2. æ•°æ®æºç®¡ç†
- æ”¯æŒå¤šæ•°æ®æºï¼š`US_FDA`, `EU_EUDAMED`, `FDA`, `EU`ç­‰
- å›½å®¶æ ‡è¯†ï¼š`jd_country`å­—æ®µæ ‡è¯†æ•°æ®é€‚ç”¨å›½å®¶
- æ•°æ®æºè¿½è¸ªï¼š`data_source`å­—æ®µè®°å½•æ•°æ®æ¥æº

### 3. å…³é”®è¯ç³»ç»Ÿ
- åŸºç¡€å…³é”®è¯è¡¨ï¼š`t_keyword`
- è®¾å¤‡åŒ¹é…å…³é”®è¯è¡¨ï¼š`t_devicematch_keywords`
- æ”¯æŒå…³é”®è¯ç±»å‹ï¼š`NORMAL`, `BLACKLIST`
- JSONæ ¼å¼å­˜å‚¨å…³é”®è¯æ•°ç»„

### 4. çˆ¬è™«ç®¡ç†
- çˆ¬è™«çŠ¶æ€ç®¡ç†ï¼š`t_crawler_state`
- æ–­ç‚¹ç»­ä¼ æ”¯æŒï¼š`t_crawler_checkpoint`
- æ•°æ®å­˜å‚¨ï¼š`t_crawler_data`
- æ”¯æŒå¤šç§çˆ¬è™«ç±»å‹å’ŒçŠ¶æ€

### 5. æ—¶é—´ç®¡ç†
- ç»Ÿä¸€çš„æ—¶é—´å­—æ®µï¼š`create_time`, `update_time`, `crawl_time`
- æ”¯æŒæ—¥æœŸèŒƒå›´æŸ¥è¯¢
- è‡ªåŠ¨æ—¶é—´æˆ³æ›´æ–°

## ğŸš€ ä½¿ç”¨è¯´æ˜

### å¿«é€Ÿè§£å†³å¯åŠ¨é—®é¢˜
```bash
# 1. æ‰§è¡Œå¿«é€Ÿé‡å»ºè„šæœ¬
mysql -u root -p2020 -h localhost < rebuild_database.sql

# 2. å¯åŠ¨Spring Bootåº”ç”¨
cd spring-boot-backend
mvn spring-boot:run
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
```bash
# 1. æ‰§è¡Œå®Œæ•´å»ºç«‹è„šæœ¬
mysql -u root -p2020 -h localhost < create_database_schema.sql

# 2. éªŒè¯æ•°æ®åº“ç»“æ„
mysql -u root -p2020 -h localhost common_db -e "SHOW TABLES;"

# 3. å¯åŠ¨åº”ç”¨
mvn spring-boot:run
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®å¤‡ä»½
- æ‰§è¡Œé‡å»ºè„šæœ¬å‰è¯·å¤‡ä»½ç°æœ‰æ•°æ®
- ç”Ÿäº§ç¯å¢ƒè¯·è°¨æ…æ“ä½œ

### 2. é…ç½®è°ƒæ•´
- ç¡®ä¿`application.yml`ä¸­çš„æ•°æ®åº“é…ç½®æ­£ç¡®
- å»ºè®®å°†Hibernateæ¨¡å¼è®¾ç½®ä¸º`update`æˆ–`none`

### 3. ç´¢å¼•ä¼˜åŒ–
- å·²ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•
- å¯æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´ç´¢å¼•ç­–ç•¥

### 4. å­—ç¬¦é›†è®¾ç½®
- ä½¿ç”¨`utf8mb4`å­—ç¬¦é›†æ”¯æŒå®Œæ•´çš„Unicode
- ç¡®ä¿ä¸­æ–‡å­—ç¬¦æ­£ç¡®å­˜å‚¨å’Œæ˜¾ç¤º

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç´¢å¼•ä¼˜åŒ–
- ä¸ºç»å¸¸æŸ¥è¯¢çš„å­—æ®µæ·»åŠ ç´¢å¼•
- è€ƒè™‘å¤åˆç´¢å¼•ä¼˜åŒ–å¤šå­—æ®µæŸ¥è¯¢
- å®šæœŸåˆ†ææŸ¥è¯¢æ€§èƒ½å¹¶è°ƒæ•´ç´¢å¼•

### 2. åˆ†åŒºç­–ç•¥
- å¯¹äºå¤§æ•°æ®é‡è¡¨è€ƒè™‘æŒ‰æ—¶é—´åˆ†åŒº
- çˆ¬è™«æ•°æ®è¡¨å¯æŒ‰æ—¥æœŸåˆ†åŒº

### 3. ç¼“å­˜ç­–ç•¥
- å›½å®¶ä¿¡æ¯ç­‰åŸºç¡€æ•°æ®å¯ç¼“å­˜
- å…³é”®è¯æ•°æ®å¯ç¼“å­˜æé«˜æŸ¥è¯¢æ€§èƒ½

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ‰§è¡Œ**ï¼šä½¿ç”¨`rebuild_database.sql`å¿«é€Ÿè§£å†³å¯åŠ¨é—®é¢˜
2. **éªŒè¯åŠŸèƒ½**ï¼šå¯åŠ¨åº”ç”¨å¹¶éªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
3. **æ•°æ®è¿ç§»**ï¼šå¦‚æœ‰éœ€è¦ï¼Œä»å¤‡ä»½ä¸­æ¢å¤é‡è¦æ•°æ®
4. **æ€§èƒ½æµ‹è¯•**ï¼šè¿›è¡Œæ•°æ®åº“æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
5. **ç›‘æ§è®¾ç½®**ï¼šè®¾ç½®æ•°æ®åº“ç›‘æ§å’Œå‘Šè­¦

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-09-28 14:20  
**æ–‡ä»¶çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æ•°æ®åº“çŠ¶æ€**: ğŸ”„ å¾…é‡å»º  
**åº”ç”¨çŠ¶æ€**: ğŸ”„ å¾…å¯åŠ¨
