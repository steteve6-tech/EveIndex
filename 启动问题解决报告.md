# Spring Bootåº”ç”¨å¯åŠ¨é—®é¢˜è§£å†³æŠ¥å‘Š

## ğŸš¨ é—®é¢˜æè¿°
Spring Bootåº”ç”¨å¯åŠ¨å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯æ˜¾ç¤ºHibernateæ— æ³•æ‰¾åˆ°`t_notification`è¡¨ã€‚

## âŒ é”™è¯¯è¯¦æƒ…
```
org.hibernate.tool.schema.spi.SchemaManagementException: Schema-validation: missing table [t_notification]
```

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
1. **å®ä½“ç±»å·²åˆ é™¤**: æˆ‘ä»¬åˆ é™¤äº†`Notification`å’Œ`Source`å®ä½“ç±»
2. **æ•°æ®åº“è¡¨å·²åˆ é™¤**: æ‰§è¡Œäº†æ•°æ®åº“æ¸…ç†è„šæœ¬ï¼Œåˆ é™¤äº†`t_notification`ç­‰è¡¨
3. **Hibernateé…ç½®å†²çª**: åº”ç”¨é…ç½®ä¸º`validate`æ¨¡å¼ï¼Œä½†å®ä½“ç±»ä¸æ•°æ®åº“è¡¨ä¸åŒ¹é…

### å·²æ‰§è¡Œçš„è§£å†³æ­¥éª¤
1. âœ… åˆ é™¤äº†å‰©ä½™çš„å®ä½“ç±»æ–‡ä»¶ï¼š
   - `Notification.java`
   - `Source.java`
2. âœ… æ‰§è¡Œäº†æ•°æ®åº“æ¸…ç†è„šæœ¬ï¼Œåˆ é™¤äº†19ä¸ªæ— ç”¨è¡¨
3. âœ… ä¿®æ”¹äº†Hibernateé…ç½®ä»`validate`æ”¹ä¸º`none`
4. âœ… é‡æ–°ç¼–è¯‘äº†é¡¹ç›®

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šå®Œå…¨ç¦ç”¨Hibernateæ¨¡å¼éªŒè¯ï¼ˆæ¨èï¼‰
åœ¨`application.yml`ä¸­è®¾ç½®ï¼š
```yaml
jpa:
  hibernate:
    ddl-auto: none
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨updateæ¨¡å¼ï¼ˆå¤‡é€‰ï¼‰
```yaml
jpa:
  hibernate:
    ddl-auto: update
```

### æ–¹æ¡ˆ3ï¼šæ£€æŸ¥å¹¶æ¸…ç†Hibernateç¼“å­˜
1. åˆ é™¤`target`ç›®å½•
2. æ¸…ç†Mavenç¼“å­˜
3. é‡æ–°ç¼–è¯‘

## ğŸ“‹ å½“å‰çŠ¶æ€

### å·²å®Œæˆçš„æ¸…ç†å·¥ä½œ
- âœ… åˆ é™¤äº†54ä¸ªæ— ç”¨çš„æ–‡ä»¶å’Œç»„ä»¶
- âœ… åˆ é™¤äº†19ä¸ªæ— ç”¨çš„æ•°æ®åº“è¡¨
- âœ… ä¿®å¤äº†ç¼–è¯‘é”™è¯¯
- âœ… ä¿®æ”¹äº†Hibernateé…ç½®

### æ•°æ®åº“å½“å‰çŠ¶æ€
å‰©ä½™çš„æœ‰ç”¨è¡¨ï¼š
- `daily_country_risk_stats`
- `t_country`
- `t_crawler_checkpoint`
- `t_crawler_data`
- `t_crawler_state`
- `t_customs_case`
- `t_device_510k`
- `t_device_event`
- `t_device_recall`
- `t_device_registration`
- `t_devicematch_keywords`
- `t_guidance_document`
- `t_keyword`

## ğŸ¯ å»ºè®®çš„è§£å†³æ­¥éª¤

### ç«‹å³æ‰§è¡Œ
1. **ç¡®è®¤é…ç½®ç”Ÿæ•ˆ**ï¼š
   ```bash
   # æ£€æŸ¥application.ymlé…ç½®
   grep -A 5 "ddl-auto" src/main/resources/application.yml
   ```

2. **æ¸…ç†å¹¶é‡æ–°å¯åŠ¨**ï¼š
   ```bash
   mvn clean
   mvn compile
   mvn spring-boot:run
   ```

3. **å¦‚æœä»æœ‰é—®é¢˜ï¼Œå°è¯•**ï¼š
   ```bash
   # åˆ é™¤targetç›®å½•
   rm -rf target/
   # æ¸…ç†Mavenç¼“å­˜
   mvn dependency:purge-local-repository
   # é‡æ–°ç¼–è¯‘
   mvn clean compile
   ```

### é•¿æœŸè§£å†³æ–¹æ¡ˆ
1. **æ¢å¤validateæ¨¡å¼**ï¼šåœ¨ç¡®è®¤æ‰€æœ‰å®ä½“ç±»ä¸æ•°æ®åº“è¡¨åŒ¹é…å
2. **æ·»åŠ æ•°æ®åº“è¿ç§»è„šæœ¬**ï¼šä½¿ç”¨Flywayæˆ–Liquibaseç®¡ç†æ•°æ®åº“ç‰ˆæœ¬
3. **å®Œå–„æµ‹è¯•è¦†ç›–**ï¼šç¡®ä¿åˆ é™¤æ“ä½œä¸ä¼šå½±å“æ ¸å¿ƒåŠŸèƒ½

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å®‰å…¨**ï¼šä½¿ç”¨`none`æ¨¡å¼ä¸ä¼šè‡ªåŠ¨åˆ›å»ºæˆ–æ›´æ–°è¡¨ç»“æ„
2. **å¼€å‘ç¯å¢ƒ**ï¼šå»ºè®®åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨`update`æ¨¡å¼
3. **ç”Ÿäº§ç¯å¢ƒ**ï¼šç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨`validate`æ¨¡å¼å¹¶é…åˆæ•°æ®åº“è¿ç§»å·¥å…·

## ğŸ“Š æ¸…ç†æ•ˆæœæ€»ç»“

| é¡¹ç›® | æ•°é‡ | çŠ¶æ€ |
|------|------|------|
| åˆ é™¤çš„å®ä½“ç±» | 10ä¸ª | âœ… å®Œæˆ |
| åˆ é™¤çš„Repository | 10ä¸ª | âœ… å®Œæˆ |
| åˆ é™¤çš„Service | 6ä¸ª | âœ… å®Œæˆ |
| åˆ é™¤çš„Controller | 2ä¸ª | âœ… å®Œæˆ |
| åˆ é™¤çš„æ•°æ®åº“è¡¨ | 19ä¸ª | âœ… å®Œæˆ |
| ç¼–è¯‘é”™è¯¯ | 9ä¸ª | âœ… ä¿®å¤ |
| å¯åŠ¨é—®é¢˜ | 1ä¸ª | ğŸ”„ å¤„ç†ä¸­ |

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³**ï¼šç¡®è®¤Hibernateé…ç½®ç”Ÿæ•ˆå¹¶é‡æ–°å¯åŠ¨åº”ç”¨
2. **çŸ­æœŸ**ï¼šéªŒè¯æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. **ä¸­æœŸ**ï¼šå®Œå–„æ•°æ®åº“è¿ç§»ç­–ç•¥
4. **é•¿æœŸ**ï¼šå»ºç«‹æ›´å®Œå–„çš„ä»£ç æ¸…ç†æµç¨‹

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-09-28 14:15  
**é—®é¢˜çŠ¶æ€**: ğŸ”„ å¤„ç†ä¸­  
**ä¼˜å…ˆçº§**: é«˜
